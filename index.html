<!DOCTYPE html>
<html ng-app="afpClientApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/throbber.css" type="text/css">
    <script src="js/lib/angular.min.js"></script>
    <script src="js/lib/angular-route.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controller/AccountlistController.js"></script>
    <script src="js/controller/ConsoleController.js"></script>
    <script src="js/service/userMessageService.js"></script>
    <script src="js/service/favouritesService.js"></script>
  </head>
  <body>
    <div class="container-fluid" ng-view></div>
    <div class="footer navbar navbar-fixed-bottom">
      <a target="_blank" href="https://github.com/ImmobilienScout24/afp-web">AWS Federation Proxy WebUI</a>
      is licensed under the
      <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License Version 2.0</a>
      .
      <span class="ng-binding">Version 2.0.0.is24</span>
    </div>

    <!-- survey start -->
    <script src="js/lib/jquery.js"></script>
    <script src="https://www.immobilienscout24.de/nps/widget?framework=JQUERY"></script>
    <style>

      .layer-container {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        opacity: 1;
        z-index: 11730000;
        background-color: #fff;
        background-color: rgba(31, 28, 28, 0.75);
      }

      .layer {
        position: relative;
        max-width: 760px;
        z-index: 11730001;
        background: #fff;
        margin: 30px auto;
        border: 1px solid #1d206e;
        border-radius: 10px;
        -webkit-box-shadow: 2px 0 18px #333;
        -moz-box-shadow: 2px 0 18px #333;
        box-shadow: 2px 0 18px #333;
        padding: 10px 20px 20px 20px;
      }

      .nps-scale {
        margin-top: 19px;
      }

      .layer h3 {
        margin-top: 10px;
      }

      #layerCloseButton {
        position: absolute;
        top: -14px;
        right: -14px;
        cursor: pointer;
      }

      #nps-feedback-container .nps-text {
        display: none;
      }

    </style>


    <div id="surveyLayerContainer" class="layer-container" style="display: none;">
      <div class="layer">
        <img id="layerCloseButton" src="images/close.png" />
        <div class="layer-description">
          <h3>AWS-Umfrage</h3>
          <p>Liebe/r Scouti,</p>

          <p>
            das ist die erste AWS-Zufriedenheitsumfrage.
            Bitte gib uns kurz Feedback, wie gut du die bereitgestellten AWS Services findest.
            Da wir das Produkt kontinuierlich verbessern wollen, werden wir dich in Zukunft häufiger zu einzelnen Themen wie z.B. Deployment oder Logging & Monitoring um deine Meinung bitten.
          </p>
          <p>Vielen Dank für deine Unterstützung!</p>
        </div>
        <div id="nps"></div>
      </div>
    </div>

    <script>
      $(function () {
        var $surveyLayerContainer = $("#surveyLayerContainer");

        function hideLayer() {
          $surveyLayerContainer.hide();
          localStorage.passedCloudInfrastructureSurvey = true;
        }

        if (!localStorage.passedCloudInfrastructureSurvey) {
          $("#nps").nps({
            category: 'CloudInfrastructureSurvey',
            ratingText: 'Wie wahrscheinlich ist es, dass du AWS an Kollegen weiterempfiehlst?',
            feedbackText: 'Feedback'
          }).success(function () {
            $("#nps-feedback-submit").on("click", function () {
              setTimeout(function () {
                hideLayer();
              }, 1500);
            })
          });

          $("#layerCloseButton, #surveyLayerContainer").on("click", hideLayer);
          $(".layer").on("click", function (event) {
            event.stopPropagation();
          });

          $surveyLayerContainer.show();
        }
      });
    </script>
    <!-- survey end -->



  </body>
</html>
